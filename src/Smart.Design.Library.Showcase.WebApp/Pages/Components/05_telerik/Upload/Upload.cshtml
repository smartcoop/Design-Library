@page
@using Kendo.Mvc.TagHelpers
@using Kendo.Mvc.UI
@model Smart.Design.Library.Showcase.Pages.Components._05_telerik.Upload.UploadModel
@{
    ViewData["MainTitle"] = "Components documentation";
    ViewData["ComponentTitle"] = "Upload";
}

<div class="u-padding-bottom-l">
    <h1 class="c-h2">@ViewData["MainTitle"]</h1>
</div>


<div class="o-grid">
    @await Html.PartialAsync("Shared/_ComponentList")
    <div class="o-grid-col-bp3-9">
        <div class="br-componentgroup-header-wrapper">
            <h1 class="br-componentgroup-header c-h2">@ViewData["ComponentTitle"]</h1>
            <p><b>Status:</b> Complete</p>
        </div>
        <div class="br-sample" id="component-01-colors">
            <div class="br-sample-header br-sample-clearfix">
                <h3 class="br-sample-heading c-h3">Upload Default</h3>
            </div>
            <div class="br-sample-documentation c-content"></div>
            <div class="br-sample-content">
                <div class="o-flex-bp3 o-flex--wrap">
                    <div class="dropdown_zone dropdown_zone_2">
                        <h4 class="ch-4 u-spacer-bottom-xs u-text-center">Invoice</h4>
                        <p class="u-m-0 u-text-center">
                            <small>Cliquez pour uploader.</small> <small>réf: <b>ContractReference</b></small>
                        </p>
                        TODO: KENDO component fom telerik

                        @(Html.Kendo()
                            .Upload()
                            .Name("contracts")
                            .DropZone(".dropdown_zone_1")
                            .Multiple(true)
                            .Validation(validation => validation.AllowedExtensions(new string[] { "jpg", "png", "jpeg", "pdf" }))
                            .Validation(validation => validation.MaxFileSize(2000000))
                            )
                        <div id="table_body_DocTypeInvoiceRequest" class="uploaded__list">


                                <hr class="c-hr u-spacer-s u-m-r-0 u-m-t-0 u-m-l-0" />
                                <div class="uploaded__item o-flex u-flex--twins o-flex--vertical-center">
                                    <div class="o-flex o-flex--vertical-center">
                                        <div class="c-badge c-badge--default u-spacer-right-s">
                                            <div class="o-svg-icon o-svg-icon-circle-information">
                                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M4 4a2 2 0 0 1 2-2h8a1 1 0 0 1 .707.293l5 5A1 1 0 0 1 20 8v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4zm13.586 4L14 4.414V8h3.586zM12 4H6v16h12V10h-5a1 1 0 0 1-1-1V4zm3.707 8.293a1 1 0 0 1 0 1.414l-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 1 1 1.414-1.414L11 15.586l3.293-3.293a1 1 0 0 1 1.414 0z" fill="#0D0D0D"></path>
                                                </svg>
                                            </div>
                                        </div>
                                        <div>
                                            <h5 class="upload__title">FileName</h5>
                                            <p class="c-body-2 u-m-0 upload__state">Uploaded</p>
                                        </div>
                                    </div>

                                    <div class="o-flex">
                                    <form id="download-invoice-id1" method="post" class="u-spacer-left-s" asp-page-handler="Download" asp-route-id="id1">
                                            <button class="c-button c-button--secondary c-button--icon c-button--small download-button" type="submit">
                                                <span class="c-button__content">
                                                    <div class="o-svg-icon o-svg-icon--download">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M12 2C12.5523 2 13 2.44772 13 3V13.5858L15.2929 11.2929C15.6834 10.9024 16.3166 10.9024 16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L12.7071 16.7071C12.3166 17.0976 11.6834 17.0976 11.2929 16.7071L7.29289 12.7071C6.90237 12.3166 6.90237 11.6834 7.29289 11.2929C7.68342 10.9024 8.31658 10.9024 8.70711 11.2929L11 13.5858V3C11 2.44772 11.4477 2 12 2ZM5 17C5.55228 17 6 17.4477 6 18V20H18V18C18 17.4477 18.4477 17 19 17C19.5523 17 20 17.4477 20 18V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V18C4 17.4477 4.44772 17 5 17Z" fill="#595959"></path>
                                                        </svg>
                                                    </div>
                                                    <div class="u-sr-accessible">
                                                        Download
                                                    </div>
                                                </span>
                                            </button>
                                        </form>
                                        <form id="delete-invoice-id1" method="post" class="u-spacer-left-s" asp-page-handler="Delete" asp-route-id="id1">
                                            <button class="c-button c-button--secondary c-button--icon c-button--small delete-button" type="submit">
                                                <span class="c-button__content">
                                                    <div class="o-svg-icon o-svg-icon--delete">
                                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                            <path d="M7 4C7 2.89543 7.89543 2 9 2H15C16.1046 2 17 2.89543 17 4V6H18.9897C18.9959 5.99994 19.0021 5.99994 19.0083 6H21C21.5523 6 22 6.44772 22 7C22 7.55228 21.5523 8 21 8H19.9311L19.0638 20.1425C18.989 21.1891 18.1182 22 17.0689 22H6.93112C5.88184 22 5.01096 21.1891 4.9362 20.1425L4.06888 8H3C2.44772 8 2 7.55228 2 7C2 6.44772 2.44772 6 3 6H4.99174C4.99795 5.99994 5.00414 5.99994 5.01032 6H7V4ZM9 6H15V4H9V6ZM6.07398 8L6.93112 20H17.0689L17.926 8H6.07398ZM10 10C10.5523 10 11 10.4477 11 11V17C11 17.5523 10.5523 18 10 18C9.44772 18 9 17.5523 9 17V11C9 10.4477 9.44772 10 10 10ZM14 10C14.5523 10 15 10.4477 15 11V17C15 17.5523 14.5523 18 14 18C13.4477 18 13 17.5523 13 17V11C13 10.4477 13.4477 10 14 10Z" fill="#595959"></path>
                                                        </svg>
                                                    </div>
                                                    <div class="u-sr-accessible">
                                                        Delete
                                                    </div>
                                                </span>
                                            </button>
                                        </form>
                                    </div>
                                </div>

                        </div>


                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


<style>

    * {
        box-sizing: border-box;
    }

    .row {
        display: flex;
    }

    .column {
        flex: 50%;
        padding: 5px;
    }


    /*To add to main.css*/
    .dropdown_zone {
        border: 1px dashed #B3B3B3;
        padding: 20px;
        width: 100%;
        margin-top: 12px;
        border-top-right-radius: 0;
        border-bottom-right-radius: 0;
        display: flex;
        flex-direction: column;
        border-radius: 4px;
    }

    @@media screen and (min-width: 900px) {
        .dropdown_zone {
            width: 50%;
            border-bottom-right-radius: 0;
            border-top-right-radius: 0;
        }

            .dropdown_zone + .dropdown_zone:nth-child(2n+2) {
                border-left: none;
            }

            .dropdown_zone:nth-child(2n+2) {
                border-top-right-radius: 4px;
                border-bottom-right-radius: 4px;
                border-top-left-radius: 0;
                border-bottom-left-radius: 0;
            }
    }

    .upload__state {
        color: #888;
        font-size: 12px;
    }

    .uploaded__item .upload__title {
        margin-bottom: 0;
    }



    /*Telerik hack*/
    .k-upload .k-dropzone, .k-upload .k-upload-dropzone {
        justify-content: center;
        background-color: transparent;
        display: block;
        text-align: center;
        margin-bottom: .8rem;
    }

    .k-upload {
        border: none;
    }

        .k-upload .k-upload-files, .k-upload .k-file {
            border: none;
        }


            .k-upload .k-upload-files .k-file, .uploaded__item {
                padding: 0;
                padding-bottom: 8px;
                margin-bottom: 0;
                height: 48px;
                align-items: center;
                border: none;
            }

    .k-file-validation-message {
        color: #E2A40C; /*use var color*/
    }

    .k-upload .k-upload-files .k-file-size, .k-upload .k-upload-files .k-file-summary, .k-upload .k-upload-files .k-file-validation-message {
        font-size: 12px;
    }

    .k-file-name {
        font-family: "Inter UI", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        font-size: 1.65rem;
        font-weight: 600;
        color: #333333;
    }


    .k-button.k-button-solid-base {
        background-image: none;
    }

    .k-button.k-button-md {
        padding-top: .7rem;
        padding-bottom: .7rem;
        padding-right: 1.6rem;
        padding-left: 1.6rem;
        height: 38px;
    }

    .k-button.k-icon-button {
        height: 30px;
        width: 30px;
        border: 2px solid black;
        border-width: 2px;
        border-style: solid;
        border-color: black !important;
        background-color: white;
        padding: 4px;
    }

        .k-button.k-icon-button:hover {
            background: rgba(0, 0, 0, 0.65) !important;
        }

            .k-button.k-icon-button:hover .k-svg-icon svg {
                fill: white;
            }

    .k-upload-status {
        margin-left: .4rem;
    }

    .k-dropzone-hint {
        top: .6rem;
    }

    .k-upload .k-upload-files .k-file-info {
        margin-left: .6rem;
    }

    .k-upload .k-progressbar {
        left: 3.7rem;
        right: 0;
    }


    .k-file .k-file-icon-wrapper .k-icon-xxl.k-svg-icon {
        width: 3.2rem;
        height: 3.2rem;
        padding: .8rem;
        border-radius: 100%;
    }

    .k-file .k-file-icon-wrapper .k-icon-xxl.k-svg-icon {
        background-color: #CCCCCC;
        transition: color .5s ease;
    }

    .k-file-progress .k-file-icon-wrapper .k-icon-xxl.k-svg-icon {
        background-color: #8AB5FF;
    }

    .k-file-success .k-file-icon-wrapper .k-icon-xxl.k-svg-icon {
        background-color: #1267FB;
    }

    .k-file-error .k-file-icon-wrapper .k-icon-xxl.k-svg-icon {
        background-color: #FFBC1A;
    }

    .k-file-icon-wrapper .k-icon-xxl.k-svg-icon svg {
        fill: white;
    }

    .dropdown_zone.success {
        border-color: #1267FB;
        border-style: solid;
    }

    .k-upload-status.k-upload-status-total {
        display: none !important;
        visibility: hidden;
    }

</style>

<script>

 window.onload = function () {
            scrollToElement();
        };

 function scrollToElement()
 {
     const element = document.getElementById( localStorage.getItem("elementToScrollTo"));
     console.log(`Element ${element} on ScrollTo Is called`);
     if (element === null) return;
     element.scrollIntoView();
 }

function onSuccess(e)
{
   let myObject = JSON.parse(e.XMLHttpRequest.responseText);
   // let requestVerificationToken = document.querySelector('input[name="__RequestVerificationToken"]').value;
   let requestVerificationToken = kendo.antiForgeryTokens().__RequestVerificationToken;
   debugger;
   var templateContent = kendo.template($("#customTemplate").html());
   var html = templateContent({ data: { name: myObject.Name, id : myObject.Id,  requestVerificationToken: requestVerificationToken, contractReference: myObject.ContractReference, docType : myObject.DocType} });
   $("#customButton").html(html);
}

function onAction(docType)
{
    console.log(`On Delete is called with param ${docType}`);
    localStorage.setItem("elementToScrollTo", `table_body_${docType}`);
}
</script>


